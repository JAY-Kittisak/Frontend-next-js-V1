{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AKIRA\\\\Desktop\\\\web-demo\\\\Project\\\\Frontend-next-js-V1\\\\src\\\\components\\\\tire\\\\CreateFactory.tsx\";\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport * as s from './CreateFactory.styles';\nimport { useRouter } from 'next/router';\nimport { useForm, ErrorMessage } from 'react-hook-form';\nimport { useMutation } from '@apollo/client';\nimport Loader from 'react-loader-spinner';\nimport Model from '../modal/Modal';\nimport { AuthContext } from '../../context/AuthContextProvider';\nimport { CREATE_FACTORY } from '../../apollo/mutations';\n\nconst CreateFactory = () => {\n  var _error$graphQLErrors$;\n\n  const {\n    setAuthUser\n  } = useContext(AuthContext);\n  const {\n    register,\n    errors,\n    handleSubmit\n  } = useForm();\n  const router = useRouter();\n  const [createFactory, {\n    loading,\n    error\n  }] = useMutation(CREATE_FACTORY); // < ^^^^^^^^^^^^^^^^^^ > คือ เจนาริค คือจะเป็น ตัว Return createFactory เป็น Factory\n\n  const submitCreateFactory = handleSubmit(async ({\n    factoryName\n  }) => {\n    try {\n      var _response$data;\n\n      const response = await createFactory({\n        variables: {\n          factoryName\n        }\n      });\n\n      if (response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.createFactory) {\n        var _response$data2;\n\n        console.log(response === null || response === void 0 ? void 0 : (_response$data2 = response.data) === null || _response$data2 === void 0 ? void 0 : _response$data2.createFactory);\n      } // if (response?.data?.createFactory) {\n      //     const { createFactory } = response.data\n      //     if (createFactory) {\n      //         // Close form\n      //         handleAuthAction('close')\n      //         // Set loggedInUser in context api\n      //         //   setAuthUser(createFactory)\n      //         // Push user to their dashboard\n      //         router.push('/dashboard')\n      //     }\n      // }\n\n    } catch (error) {// setAuthUser(null)\n    }\n  });\n  console.log('loading :', loading);\n  console.log('Error :', error);\n  return __jsx(Model, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, __jsx(s.FormContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, __jsx(s.StyledForm, {\n    onSubmit: submitCreateFactory,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    className: \"email_section_label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, \"\\u0E01\\u0E23\\u0E2D\\u0E1A\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1A\\u0E23\\u0E34\\u0E29\\u0E31\\u0E17\"), __jsx(s.InputContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 25\n    }\n  }, \"Factory Name\"), __jsx(s.Input, {\n    type: \"text\",\n    name: \"factoryName\",\n    id: \"factoryName\",\n    placeholder: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1A\\u0E23\\u0E34\\u0E29\\u0E31\\u0E17 ... \\u0E08\\u0E33\\u0E01\\u0E31\\u0E14\",\n    autoComplete: \"new-password\",\n    ref: register({\n      required: 'โปรดกรอกชื่อบริษัท',\n      minLength: {\n        value: 3,\n        message: 'ชื่อบริษัทมีความยาวน้อยเกินไป'\n      },\n      maxLength: {\n        value: 60,\n        message: 'ชื่อบริษัทมีความยาวมากเกินไป'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  }), __jsx(ErrorMessage, {\n    errors: errors,\n    name: \"factoryName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }, ({\n    message\n  }) => __jsx(s.StyledError, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 47\n    }\n  }, message))), __jsx(s.Button, {\n    disabled: loading,\n    style: {\n      cursor: loading ? 'not-allowed' : 'pointer'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  }, loading ? __jsx(Loader, {\n    type: \"Oval\",\n    color: \"white\",\n    height: 30,\n    width: 30,\n    timeout: 30000,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  }) : 'Submit'), error && __jsx(s.StyledError, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 25\n    }\n  }, ((_error$graphQLErrors$ = error.graphQLErrors[0]) === null || _error$graphQLErrors$ === void 0 ? void 0 : _error$graphQLErrors$.message) || 'Sorry, something went wrong'))));\n};\n\nexport default CreateFactory;","map":{"version":3,"sources":["C:/Users/AKIRA/Desktop/web-demo/Project/Frontend-next-js-V1/src/components/tire/CreateFactory.tsx"],"names":["React","useContext","s","useRouter","useForm","ErrorMessage","useMutation","Loader","Model","AuthContext","CREATE_FACTORY","CreateFactory","setAuthUser","register","errors","handleSubmit","router","createFactory","loading","error","submitCreateFactory","factoryName","response","variables","data","console","log","required","minLength","value","message","maxLength","cursor","graphQLErrors"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\r\nimport * as s from './CreateFactory.styles';\r\nimport { useRouter } from 'next/router';\r\nimport { useForm, ErrorMessage } from 'react-hook-form';\r\nimport { useMutation } from '@apollo/client';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport Model from '../modal/Modal';\r\nimport { AuthContext } from '../../context/AuthContextProvider';\r\nimport { CREATE_FACTORY } from '../../apollo/mutations';\r\nimport { Factory, FactoryArgs } from '../../types';\r\n\r\ninterface Props {}\r\n\r\nconst CreateFactory: React.FC<Props> = () => {\r\n    const { setAuthUser } = useContext(AuthContext);\r\n    const { register, errors, handleSubmit } = useForm<{\r\n        factoryName: string;\r\n    }>();\r\n\r\n    const router = useRouter();\r\n\r\n    const [createFactory, { loading, error }] = useMutation<\r\n        { createFactory: Factory },\r\n        FactoryArgs\r\n    >(CREATE_FACTORY);\r\n        // < ^^^^^^^^^^^^^^^^^^ > คือ เจนาริค คือจะเป็น ตัว Return createFactory เป็น Factory\r\n\r\n\r\n    const submitCreateFactory = handleSubmit(async ({ factoryName }) => {\r\n        try {\r\n            const response = await createFactory({\r\n                variables: {factoryName,}\r\n            })\r\n            if (response?.data?.createFactory) {\r\n                console.log(response?.data?.createFactory)\r\n            }\r\n\r\n\r\n            // if (response?.data?.createFactory) {\r\n            //     const { createFactory } = response.data\r\n\r\n            //     if (createFactory) {\r\n            //         // Close form\r\n            //         handleAuthAction('close')\r\n\r\n            //         // Set loggedInUser in context api\r\n            //         //   setAuthUser(createFactory)\r\n\r\n            //         // Push user to their dashboard\r\n            //         router.push('/dashboard')\r\n            //     }\r\n            // }\r\n        } catch (error) {\r\n            // setAuthUser(null)\r\n        }\r\n    }\r\n    );\r\n    console.log('loading :', loading)\r\n    console.log('Error :', error)\r\n\r\n    return (\r\n        <Model>\r\n            <s.FormContainer>\r\n                <s.StyledForm onSubmit={submitCreateFactory}>\r\n                    <p className=\"email_section_label\">กรอบชื่อบริษัท</p>\r\n                    <s.InputContainer>\r\n                        <label>Factory Name</label>\r\n                        <s.Input\r\n                            type=\"text\"\r\n                            name=\"factoryName\"\r\n                            id=\"factoryName\"\r\n                            placeholder=\"ชื่อบริษัท ... จำกัด\"\r\n                            autoComplete=\"new-password\"\r\n                            ref={register({\r\n                                required: 'โปรดกรอกชื่อบริษัท',\r\n                                minLength: {\r\n                                    value: 3,\r\n                                    message: 'ชื่อบริษัทมีความยาวน้อยเกินไป'\r\n                                },\r\n                                maxLength: {\r\n                                    value: 60,\r\n                                    message: 'ชื่อบริษัทมีความยาวมากเกินไป'\r\n                                }\r\n                            })}\r\n                        />\r\n                        <ErrorMessage errors={errors} name=\"factoryName\">\r\n                            {({ message }) => <s.StyledError>{message}</s.StyledError>}\r\n                        </ErrorMessage>\r\n                    </s.InputContainer>\r\n                    <s.Button\r\n                        disabled={loading}\r\n                        style={{ cursor: loading ? 'not-allowed' : 'pointer' }}>\r\n                        {loading ? (\r\n                            <Loader\r\n                                type=\"Oval\"\r\n                                color=\"white\"\r\n                                height={30}\r\n                                width={30}\r\n                                timeout={30000}\r\n                            />\r\n                        ) : (\r\n                            'Submit'\r\n                        )}\r\n                    </s.Button>\r\n                    {error && (\r\n                        <s.StyledError>\r\n                            {error.graphQLErrors[0]?.message || 'Sorry, something went wrong'}\r\n                        </s.StyledError>\r\n                    )}\r\n                </s.StyledForm>\r\n            </s.FormContainer>\r\n        </Model>\r\n    );\r\n};\r\n\r\nexport default CreateFactory;\r\n"]},"metadata":{},"sourceType":"module"}