{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\AKIRA\\\\Desktop\\\\web-demo\\\\Project\\\\Frontend-next-js-V1\\\\src\\\\components\\\\tire\\\\CreateFactory.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport * as s from './CreateFactory.styles';\nimport { useRouter } from 'next/router';\nimport { useForm, ErrorMessage } from 'react-hook-form';\nimport { useMutation } from '@apollo/client';\nimport Loader from 'react-loader-spinner';\nimport Model from '../modal/Modal';\nimport { AuthContext } from '../../context/AuthContextProvider';\nimport { CREATE_FACTORY } from '../../apollo/mutations';\n\nvar CreateFactory = function CreateFactory() {\n  _s();\n\n  var _error$graphQLErrors$;\n\n  var _useContext = useContext(AuthContext),\n      handleAuthAction = _useContext.handleAuthAction;\n\n  var _useForm = useForm(),\n      register = _useForm.register,\n      errors = _useForm.errors,\n      handleSubmit = _useForm.handleSubmit;\n\n  var router = useRouter();\n\n  var _useMutation = useMutation(CREATE_FACTORY),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      createFactory = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      loading = _useMutation2$.loading,\n      error = _useMutation2$.error; // < ^^^^^^^^^^^^^^^^^^ > คือ เจนาริค คือจะเป็น ตัว Return createFactory เป็น Factory\n\n\n  var submitCreateFactory = handleSubmit( /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n      var factoryName, _response$data, response, _createFactory;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              factoryName = _ref.factoryName;\n              _context.prev = 1;\n              _context.next = 4;\n              return createFactory({\n                variables: {\n                  factoryName: factoryName\n                }\n              });\n\n            case 4:\n              response = _context.sent;\n\n              if (response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.createFactory) {\n                _createFactory = response.data.createFactory;\n\n                if (_createFactory) {\n                  // Close form\n                  handleAuthAction('close'); // Push user to their dashboard\n\n                  router.push('/Tier'); //FIXME:\n                }\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              throw _context.t0;\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 8]]);\n    }));\n\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n  return __jsx(Model, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, __jsx(s.FormContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, __jsx(s.StyledForm, {\n    onSubmit: submitCreateFactory,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    className: \"email_section_label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, \"\\u0E01\\u0E23\\u0E2D\\u0E1A\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1A\\u0E23\\u0E34\\u0E29\\u0E31\\u0E17\"), __jsx(s.InputContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, __jsx(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 25\n    }\n  }, \"Factory Name\"), __jsx(s.Input, {\n    type: \"text\",\n    name: \"factoryName\",\n    id: \"factoryName\",\n    placeholder: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E1A\\u0E23\\u0E34\\u0E29\\u0E31\\u0E17 ... \\u0E08\\u0E33\\u0E01\\u0E31\\u0E14\",\n    autoComplete: \"new-password\",\n    ref: register({\n      required: 'โปรดกรอกชื่อบริษัท',\n      minLength: {\n        value: 3,\n        message: 'ชื่อบริษัทมีความยาวน้อยเกินไป'\n      },\n      maxLength: {\n        value: 60,\n        message: 'ชื่อบริษัทมีความยาวมากเกินไป'\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 25\n    }\n  }), __jsx(ErrorMessage, {\n    errors: errors,\n    name: \"factoryName\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 25\n    }\n  }, function (_ref3) {\n    var message = _ref3.message;\n    return __jsx(s.StyledError, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 47\n      }\n    }, message);\n  })), __jsx(s.Button, {\n    disabled: loading,\n    style: {\n      cursor: loading ? 'not-allowed' : 'pointer'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, loading ? __jsx(Loader, {\n    type: \"Oval\",\n    color: \"white\",\n    height: 30,\n    width: 30,\n    timeout: 30000,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 29\n    }\n  }) : 'Submit'), error && __jsx(s.StyledError, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }, ((_error$graphQLErrors$ = error.graphQLErrors[0]) === null || _error$graphQLErrors$ === void 0 ? void 0 : _error$graphQLErrors$.message) || 'Sorry, something went wrong'))));\n};\n\n_s(CreateFactory, \"C8m7V8TVmGlaypyO1ANRxHHu+ac=\", false, function () {\n  return [useForm, useRouter, useMutation];\n});\n\n_c = CreateFactory;\nexport default CreateFactory;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateFactory\");","map":{"version":3,"sources":["C:/Users/AKIRA/Desktop/web-demo/Project/Frontend-next-js-V1/src/components/tire/CreateFactory.tsx"],"names":["React","useContext","s","useRouter","useForm","ErrorMessage","useMutation","Loader","Model","AuthContext","CREATE_FACTORY","CreateFactory","handleAuthAction","register","errors","handleSubmit","router","createFactory","loading","error","submitCreateFactory","factoryName","variables","response","data","push","required","minLength","value","message","maxLength","cursor","graphQLErrors"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\r\nimport * as s from './CreateFactory.styles';\r\nimport { useRouter } from 'next/router';\r\nimport { useForm, ErrorMessage } from 'react-hook-form';\r\nimport { useMutation } from '@apollo/client';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport Model from '../modal/Modal';\r\nimport { AuthContext } from '../../context/AuthContextProvider';\r\nimport { CREATE_FACTORY } from '../../apollo/mutations';\r\nimport { Factory, FactoryArgs } from '../../types';\r\n\r\ninterface Props {}\r\n\r\nconst CreateFactory: React.FC<Props> = () => {\r\n    const { handleAuthAction } = useContext(AuthContext);\r\n    const { register, errors, handleSubmit } = useForm<{\r\n        factoryName: string;\r\n    }>();\r\n\r\n    const router = useRouter();\r\n\r\n    const [createFactory, { loading, error }] = useMutation<\r\n        { createFactory: Factory },\r\n        FactoryArgs\r\n    >(CREATE_FACTORY);\r\n        // < ^^^^^^^^^^^^^^^^^^ > คือ เจนาริค คือจะเป็น ตัว Return createFactory เป็น Factory\r\n\r\n\r\n    const submitCreateFactory = handleSubmit(async ({ factoryName }) => {\r\n        try {\r\n            const response = await createFactory({\r\n                variables: { factoryName }\r\n            });\r\n\r\n            if (response?.data?.createFactory) {\r\n                const { createFactory } = response.data;\r\n                if (createFactory) {\r\n                    // Close form\r\n                    handleAuthAction('close');\r\n\r\n                    // Push user to their dashboard\r\n                    router.push('/Tier'); //FIXME:\r\n                }\r\n            }\r\n        } catch (error) {\r\n            throw error; //FIXME:\r\n        }\r\n    });\r\n\r\n    return (\r\n        <Model>\r\n            <s.FormContainer>\r\n                <s.StyledForm onSubmit={submitCreateFactory}>\r\n                    <p className=\"email_section_label\">กรอบชื่อบริษัท</p>\r\n                    <s.InputContainer>\r\n                        <label>Factory Name</label>\r\n                        <s.Input\r\n                            type=\"text\"\r\n                            name=\"factoryName\"\r\n                            id=\"factoryName\"\r\n                            placeholder=\"ชื่อบริษัท ... จำกัด\"\r\n                            autoComplete=\"new-password\"\r\n                            ref={register({\r\n                                required: 'โปรดกรอกชื่อบริษัท',\r\n                                minLength: {\r\n                                    value: 3,\r\n                                    message: 'ชื่อบริษัทมีความยาวน้อยเกินไป'\r\n                                },\r\n                                maxLength: {\r\n                                    value: 60,\r\n                                    message: 'ชื่อบริษัทมีความยาวมากเกินไป'\r\n                                }\r\n                            })}\r\n                        />\r\n                        <ErrorMessage errors={errors} name=\"factoryName\">\r\n                            {({ message }) => <s.StyledError>{message}</s.StyledError>}\r\n                        </ErrorMessage>\r\n                    </s.InputContainer>\r\n                    <s.Button\r\n                        disabled={loading}\r\n                        style={{ cursor: loading ? 'not-allowed' : 'pointer' }}>\r\n                        {loading ? (\r\n                            <Loader\r\n                                type=\"Oval\"\r\n                                color=\"white\"\r\n                                height={30}\r\n                                width={30}\r\n                                timeout={30000}\r\n                            />\r\n                        ) : (\r\n                            'Submit'\r\n                        )}\r\n                    </s.Button>\r\n                    {/*  ถ้ามี error ให้แสดง error หรือ Sorry, something went wromg */}\r\n                    {error && (\r\n                        <s.StyledError>\r\n                            {error.graphQLErrors[0]?.message || 'Sorry, something went wrong'}\r\n                        </s.StyledError>\r\n                    )}\r\n                </s.StyledForm>\r\n            </s.FormContainer>\r\n        </Model>\r\n    );\r\n};\r\n\r\nexport default CreateFactory;\r\n"]},"metadata":{},"sourceType":"module"}